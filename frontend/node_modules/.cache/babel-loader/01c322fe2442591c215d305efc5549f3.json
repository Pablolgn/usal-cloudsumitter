{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.focusElement = focusElement;\nexports.SelectorItem = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _common = require(\"../../common\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst selectItemClasses = classes => classes.selectorItem;\n\nconst selectItemSelectedClasses = classes => classes.selectorItemSelected || classes.selectorItem;\n\nclass SelectorItem extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"handleRef\", element => {\n      this.props.onRef(element, this.props.index);\n    });\n\n    _defineProperty(this, \"handleClick\", () => this.props.onSelect && this.props.onSelect(this.props.item.data));\n\n    _defineProperty(this, \"handleKeyDown\", (0, _common.getKeyboardShortcutBlocker)(['Enter', ' ']));\n\n    _defineProperty(this, \"handleKeyUp\", keyboardEvent => {\n      if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n        keyboardEvent.preventDefault();\n        this.handleClick();\n      }\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          className = _this$props.className,\n          classNamePrefix = _this$props.classNamePrefix,\n          classes = _this$props.classes,\n          defaultItemClassName = _this$props.defaultItemClassName,\n          item = _this$props.item,\n          isSelected = _this$props.isSelected,\n          canReceiveFocus = _this$props.canReceiveFocus,\n          selectedClassName = _this$props.selectedClassName;\n    const label = item.label;\n    const classNames = (0, _common.hydrateClassNames)({\n      classes,\n      classNamePrefix,\n      selectClasses: isSelected ? selectItemSelectedClasses : selectItemClasses,\n      classNames: [className, defaultItemClassName, isSelected ? selectedClassName : null]\n    });\n    const tabIndex = canReceiveFocus ? 0 : undefined;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"option\",\n      \"aria-selected\": isSelected,\n      className: classNames,\n      ref: this.handleRef,\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeyDown,\n      onKeyUp: this.handleKeyUp,\n      tabIndex: tabIndex\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      tabIndex: -1\n    }, label));\n  }\n\n}\n\nexports.SelectorItem = SelectorItem;\n\nfunction focusElement(upwards, isReverseOrder, items, baseElement) {\n  const elements = (isReverseOrder ? items.slice(0).reverse() : items).concat(baseElement);\n\n  for (let i = 0; i < elements.length; i++) {\n    if (elements[i] === document.activeElement) {\n      if (upwards) {\n        if (i > 0) {\n          for (let j = i - 1; j >= 0; j--) {\n            const element = elements[j];\n\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      } else {\n        if (i < elements.length - 1) {\n          for (let j = i + 1; j < elements.length; j++) {\n            const element = elements[j];\n\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      }\n    }\n  }\n}","map":{"version":3,"sources":["../../../src/replay/components/generic/Selector/helpers.js"],"names":["selectItemClasses","classes","selectItemSelectedClasses","React","element","keyboardEvent","render","className","classNamePrefix","defaultItemClassName","item","isSelected","canReceiveFocus","selectedClassName","label","classNames","selectClasses","tabIndex","elements","isReverseOrder","items","i","document","j"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { getKeyboardShortcutBlocker, hydrateClassNames } from '../../common';\nimport type { CommonGenericProps, Id } from '../../common';\n\nexport type ItemData = {\n  label: string,\n  id?: Id,\n  data?: any\n};\n\ntype SelectorItemProps = CommonGenericProps & {\n  item: ItemData,\n  index: number,\n  isSelected: boolean,\n  canReceiveFocus: boolean,\n  defaultItemClassName: string,\n  selectedClassName: string,\n  onSelect?: any => void,\n  onRef: (?HTMLElement, number) => void\n};\n\nconst selectItemClasses = classes => classes.selectorItem;\nconst selectItemSelectedClasses = classes => classes.selectorItemSelected || classes.selectorItem;\n\nexport class SelectorItem extends React.Component<SelectorItemProps> {\n  handleRef = (element: ?HTMLElement) => {\n    this.props.onRef(element, this.props.index);\n  };\n\n  handleClick = () => this.props.onSelect && this.props.onSelect(this.props.item.data);\n\n  handleKeyDown = getKeyboardShortcutBlocker(['Enter', ' ']);\n\n  handleKeyUp = (keyboardEvent: KeyboardEvent) => {\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      keyboardEvent.preventDefault();\n      this.handleClick();\n    }\n  };\n\n  render() {\n    const {\n      className,\n      classNamePrefix,\n      classes,\n      defaultItemClassName,\n      item,\n      isSelected,\n      canReceiveFocus,\n      selectedClassName\n    } = this.props;\n    const { label } = item;\n    const classNames = hydrateClassNames({\n      classes,\n      classNamePrefix,\n      selectClasses: isSelected ? selectItemSelectedClasses : selectItemClasses,\n      classNames: [className, defaultItemClassName, isSelected ? selectedClassName : null]\n    });\n    const tabIndex = canReceiveFocus ? 0 : undefined;\n    return (\n      <div\n        role=\"option\"\n        aria-selected={isSelected}\n        className={classNames}\n        ref={this.handleRef}\n        onClick={this.handleClick}\n        onKeyDown={this.handleKeyDown}\n        onKeyUp={this.handleKeyUp}\n        tabIndex={tabIndex}>\n        <div tabIndex={-1}>{label}</div>\n      </div>\n    );\n  }\n}\n\nexport function focusElement(\n  upwards: boolean,\n  isReverseOrder: boolean,\n  items: Array<?HTMLElement>,\n  baseElement: ?HTMLElement\n) {\n  const elements = (isReverseOrder ? items.slice(0).reverse() : items).concat(baseElement);\n  for (let i = 0; i < elements.length; i++) {\n    if (elements[i] === document.activeElement) {\n      if (upwards) {\n        if (i > 0) {\n          for (let j = i - 1; j >= 0; j--) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      } else {\n        if (i < elements.length - 1) {\n          for (let j = i + 1; j < elements.length; j++) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}